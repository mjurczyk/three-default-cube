(this["webpackJsonpgame-starter"]=this["webpackJsonpgame-starter"]||[]).push([[0],{20:function(e,t,r){e.exports=r.p+"static/media/character.e1ab850e.glb"},33:function(e,t,r){e.exports=r.p+"static/media/demo-basic.ed8ca940.glb"},49:function(e,t,r){e.exports=r(90)},80:function(e,t,r){e.exports=r.p+"static/media/demo-actions-and-ui.6235c1a6.glb"},81:function(e,t,r){e.exports=r.p+"static/media/demo-game-objects.7e1b2b59.glb"},82:function(e,t,r){e.exports=r.p+"static/media/demo-persistence.146d3590.glb"},83:function(e,t,r){e.exports=r.p+"static/media/demo-physics.79823df6.glb"},84:function(e,t,r){e.exports=r.p+"static/media/demo-ui-alignment.3e84587d.glb"},85:function(e,t,r){e.exports=r.p+"static/media/spinner-default.9d266d9a.png"},86:function(e,t,r){e.exports=r.p+"static/media/font.3ed9575d.ttf"},87:function(e,t,r){e.exports=r.p+"static/media/intro.56f385dd.glb"},90:function(e,t,r){"use strict";r.r(t);var a=r(8),n=r.n(a),i=r(11),s=r(1),c=r(12),o=r(2),u=r(5),l=r(3),v=r(4),p=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(33)),s.AssetsService.getModel(r(20))],onComplete:function(e){var r=Object(c.a)(e,2),a=r[0],n=r[1];s.SceneService.parseScene({target:a,navpath:1,gameObjects:{player:function(e){Object(s.replacePlaceholder)(e,n);var t=new s.AnimationWrapper(n);t.playAnimation("idle");var r=new s.PhysicsWrapper(e);r.enableNavmaps();var a=0;s.TimeService.registerFrameListener((function(){var n=s.InputService.keys.w,i=s.InputService.keys.s,c=s.InputService.keys.a,o=s.InputService.keys.d,u=s.MathService.getVec3(0,0,0);if(n&&(u.z-=1),i&&(u.z+=1),c&&(u.x-=1),o&&(u.x+=1),u.length()>0){a=s.MathUtils.lerp(a,.04,.2);var l=s.MathService.getVec3(0,0,0),v=s.UtilsService.getEmpty();e.getWorldPosition(l).sub(u),v.position.copy(e.position),v.quaternion.copy(e.quaternion),v.lookAt(l),e.quaternion.slerp(v.quaternion,.2),s.MathService.releaseVec3(l),s.UtilsService.releaseEmpty(v)}else a=s.MathUtils.lerp(a,0,.2);u.normalize().multiplyScalar(a),r.setSimpleVelocity(u),t.blendInAnimation("run",25*a),s.MathService.releaseVec3(u)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(a)}})}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),m=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(33)),s.AssetsService.getModel(r(20))],onComplete:function(e){var r=Object(c.a)(e,2),a=r[0],n=r[1];s.SceneService.parseScene({target:a,navpath:1,gameObjects:{player:function(e){Object(s.replacePlaceholder)(e,n);var t=new s.AnimationWrapper(n);t.playAnimation("idle");var r=new s.PhysicsWrapper(e);r.enableNavmaps();var a=0;s.CameraService.follow(e),s.CameraService.followPivotPosition.set(0,2,2),s.TimeService.registerFrameListener((function(){var n=s.InputService.keys.w,i=s.InputService.keys.s,c=s.InputService.keys.a,o=s.InputService.keys.d;c&&(e.rotation.y-=.025),o&&(e.rotation.y+=.025),a=n?s.MathUtils.lerp(a,-.04,.2):i?s.MathUtils.lerp(a,.02,.2):s.MathUtils.lerp(a,0,.2);var u=s.MathService.getVec3();e.getWorldDirection(u),u.multiplyScalar(a),r.setSimpleVelocity(u),t.blendInAnimation("run",25*Math.abs(a)),s.MathService.releaseVec3(u)}))}},onCreate:function(){t.add(a)}})}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),S=r(0),g=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),s.VarService.setVar("count",0),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(80))],onComplete:function(e){var r=Object(c.a)(e,1)[0];s.SceneService.parseScene({target:r,actions:{increment:function(e){s.VarService.setVar("count",Math.min(s.VarService.getVar("count")+1,10)),e.material.emissiveIntensity=1,e.scale.setScalar(1.1)},decrement:function(e){s.VarService.setVar("count",Math.max(0,s.VarService.getVar("count")-1)),e.material.emissiveIntensity=1,e.scale.setScalar(1.1)}},gameObjects:{actionButton:function(e){var t=e.material;t.emissiveIntensity=0,t.emissive=new S.Color(16777164),s.TimeService.registerFrameListener((function(){t.emissiveIntensity=s.MathUtils.lerp(t.emissiveIntensity,0,.1);var r=s.MathService.getVec3(1,1,1);e.scale.lerp(r,.1),s.MathService.releaseVec3(r)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(r)}})}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),d=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),new s.Preloader({requireAssets:[s.AssetsService.preloadModel(r(20))],onComplete:function(){!function e(){s.AssetsService.getModel(r(20)).then((function(e){s.SceneService.parseScene({target:e,onCreate:function(){e.position.x=s.MathUtils.randFloat(-5,5),e.position.y-=1.5,e.position.z-=15+s.MathUtils.randFloat(0,10),e.rotation.y=s.MathUtils.randFloat(-s.mathPi4,s.mathPi4),t.add(e),setTimeout((function(){s.AssetsService.disposeAsset(e)}),3e3+500*Math.random())}})})),setTimeout((function(){e()}),1e3+500*Math.random())}()}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),h=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(81))],onComplete:function(e){var r=Object(c.a)(e,1)[0];s.SceneService.parseScene({target:r,gameObjects:{cubeRed:function(e){s.TimeService.registerFrameListener((function(t){var r=t.elapsedTime;e.rotation.x+=.1*Math.sin(r)}))},cubeGreen:function(e){s.TimeService.registerFrameListener((function(t){var r=t.elapsedTime;e.position.y=.5*Math.sin(r),e.rotation.x=-.4*Math.sin(r)}))},cubeBlue:function(e){s.TimeService.registerFrameListener((function(t){var r=t.elapsedTime,a=s.MathService.getVec3(1,1,1).multiplyScalar(.1*Math.sin(r)+1);e.scale.copy(a),s.MathService.releaseVec3(a)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(r)}})}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),f=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),e.next=5,s.VarService.registerPersistentVar("viewCount",0);case 5:s.VarService.setVar("viewCount",s.VarService.getVar("viewCount")+1),1===s.VarService.getVar("viewCount")?s.VarService.setVar("views","You saw this page 1 time"):s.VarService.getVar("viewCount")>1&&s.VarService.getVar("viewCount")<10?s.VarService.setVar("views","You saw this page ".concat(s.VarService.getVar("viewCount")," times")):s.VarService.setVar("views","You saw this page plenty of times"),new s.Preloader({spinnerTexture:s.GameInfoService.config.textures.spinner,requireAssets:[s.AssetsService.getModel(r(82))],onComplete:function(e){var r=Object(c.a)(e,1)[0];s.SceneService.parseScene({target:r,gameObjects:{},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(r)}})}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),b=function(){function e(t){Object(o.a)(this,e),this.target=null,this.snowCanvas=null,this.snowTexture=null,this.snowProps={textureSize:64,textureColor:"#999999",snowOffset:2,snowDisplacement:.1},this.target=t,this.onCreate()}return Object(u.a)(e,[{key:"onCreate",value:function(){this.target.material&&s.AssetsService.disposeProps(this.target.material),this.snowCanvas=document.createElement("canvas"),this.snowCanvas.width=this.snowProps.textureSize,this.snowCanvas.height=this.snowProps.textureSize;var e=this.snowCanvas.getContext("2d");e.fillStyle="#000000",e.fillRect(0,0,this.snowCanvas.width,this.snowCanvas.height),e.globalCompositeOperation="screen",this.snowTexture=new S.CanvasTexture(this.snowCanvas),s.AssetsService.registerDisposable(this.snowTexture),this.target.material=new S.MeshPhongMaterial({color:16777215,side:S.DoubleSide,displacementMap:this.snowTexture,displacementScale:-this.snowProps.snowDisplacement,metalness:.5,roughness:.5,emissive:new S.Color(16777215),emissiveIntensity:.3}),s.AssetsService.registerDisposable(this.target.material)}},{key:"onInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hit,r=t.uv,a=this.snowTexture.image;if(r&&a){this.snowTexture.transformUv(r);var n=a.getContext("2d"),i=r.x*this.snowProps.textureSize-this.snowProps.snowOffset/2,s=r.y*this.snowProps.textureSize-this.snowProps.snowOffset/2;n.fillStyle="#ffffff",n.fillRect(i,s,this.snowProps.snowOffset,this.snowProps.snowOffset),this.snowTexture.needsUpdate=!0}}},{key:"dispose",value:function(){this.target&&delete this.target,this.snowTexture&&delete this.snowTexture,delete this.snowCanvas,this.snowCanvas=null,delete this.snowProps}}]),e}(),w=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),s.PhysicsService.registerSurfaceHandler("snow",b,"onInteraction"),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(83)),s.AssetsService.getModel(r(20))],onComplete:function(e){var r=Object(c.a)(e,2),a=r[0],n=r[1];s.SceneService.parseScene({target:a,gameObjects:{player:function(e){Object(s.replacePlaceholder)(e,n);var t=new s.AnimationWrapper(n);t.playAnimation("idle");var r=new s.PhysicsWrapper(e);r.enableNavmaps();var a=0;s.TimeService.registerFrameListener((function(){var n=s.InputService.keys.w,i=s.InputService.keys.s,c=s.InputService.keys.a,o=s.InputService.keys.d,u=s.MathService.getVec3(0,0,0);if(n&&(u.z-=1),i&&(u.z+=1),c&&(u.x-=1),o&&(u.x+=1),u.length()>0){a=s.MathUtils.lerp(a,.04,.2);var l=s.MathService.getVec3(0,0,0),v=s.UtilsService.getEmpty();e.getWorldPosition(l).sub(u),v.position.copy(e.position),v.quaternion.copy(e.quaternion),v.lookAt(l),e.quaternion.slerp(v.quaternion,.2),s.MathService.releaseVec3(l),s.UtilsService.releaseEmpty(v)}else a=s.MathUtils.lerp(a,0,.2);u.normalize().multiplyScalar(a),r.setSimpleVelocity(u),t.blendInAnimation("run",25*a),s.MathService.releaseVec3(u)}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(a)}})}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),y=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(33)),s.AssetsService.getModel(r(20))],onComplete:function(e){var r=Object(c.a)(e,2),a=r[0],n=r[1];s.SceneService.parseScene({target:a,navpath:2,gameObjects:{player:function(e){Object(s.replacePlaceholder)(e,n),new s.AnimationWrapper(n).playAnimation("run");var t=new s.PhysicsWrapper(e);t.enableNavmaps(),t.enableNoClip();var r=new s.AiWrapper(e);r.registerBehaviour((function(){r.hasTargetNode()&&r.getDistanceToTargetNode()<=.5&&r.setTargetNode(null),r.hasTargetNode()||0!==r.path.length||(r.setTargetNode(s.AiService.getAiNodeById(Object(s.getRandomElement)([1,2,3]))),r.findPathToTargetNode());var e=r.getTargetNode(),t=s.MathService.getVec3();return e.getWorldPosition(t),Object(s.createArrowHelper)(s.RenderService.getScene(),"target-position",new S.Vector3(0,2,0),t),s.MathService.releaseVec3(t),{targetNode:e}}));s.TimeService.registerFrameListener((function(){var a=r.getAiBehaviour().targetNode;if(a){var i=s.MathService.getVec3();a.getWorldPosition(i),i.y=e.position.y;var c=s.UtilsService.getEmpty();e.add(c),c.lookAt(i),n.quaternion.slerp(c.quaternion,.2);var o=s.MathService.getVec3();n.getWorldDirection(o),t.setSimpleVelocity(o.multiplyScalar(.04)),s.MathService.releaseVec3(i),s.MathService.releaseVec3(o),s.UtilsService.releaseEmpty(c)}}))}},onCreate:function(){s.CameraService.useCamera(s.CameraService.getCamera("initial"),!1),t.add(a)}})}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),C=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCreate",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.RenderService.getScene(),a=s.AssetsService.getAmbientLight(16777164,255,7),t.add(a),s.TimeService.registerIntervalListener((function(){s.VarService.setVar("variable-x","".concat(100*Math.random(),"%")),s.VarService.setVar("variable-y","".concat(100*Math.random(),"%"))}),3e3),new s.Preloader({requireAssets:[s.AssetsService.getModel(r(84))],onComplete:function(e){var t=Object(c.a)(e,1)[0];s.UiService.registerUiElement(t);var r=s.AssetsService.getAmbientLight(16777164,255,5);s.UiService.uiScene.add(r),t.position.z-=6,s.SceneService.parseScene({target:t,gameObjects:{marker:function(e){s.AnimationService.registerAnimation({target:e,onCreate:function(e){var t=e.target;t.userData.rotation=t.rotation.clone()},onStep:function(e){var t=e.target,r=e.animationTime;t.rotation.z=t.rotation.z-.001*Math.cos(r)}})}},onCreate:function(){}})}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.ViewClass),O=Object.fromEntries(new URLSearchParams(window.location.search).entries()).demoId;s.DummyDebug.on(s.DebugFlags.DEBUG_ENABLE),"debugging"===O&&(s.DummyDebug.on(s.DebugFlags.DEBUG_LIVE),s.DummyDebug.on(s.DebugFlags.DEBUG_LOG_ASSETS),s.DummyDebug.on(s.DebugFlags.DEBUG_LOG_MEMORY),s.DummyDebug.on(s.DebugFlags.DEBUG_LOG_POOLS),s.DummyDebug.on(s.DebugFlags.DEBUG_STORAGE),s.DummyDebug.on(s.DebugFlags.DEBUG_TIME_LISTENERS)),s.GameInfoService.system(60,1,!0,!0,0).camera(50,.1,1e3).texture("spinner",r(85)).font("default",r(86)).model("intro",r(87)),s.SystemService.init(),s.SystemService.onReady(Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.querySelector("#root"),s.RenderService.init({domElement:t}),s.RenderService.renderView({camera:new m,"views-and-scenes":new p,"actions-and-ui":new g,debugging:new d,"game-objects":new h,persistence:new f,physics:new w,ai:new y,"ui-alignment":new C}[O]),s.RenderService.run();case 4:case"end":return e.stop()}}),e)}))))}},[[49,1,2]]]);
//# sourceMappingURL=main.523e2e2f.chunk.js.map